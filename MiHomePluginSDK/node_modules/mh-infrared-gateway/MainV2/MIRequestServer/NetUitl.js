'use strict';
var React = require('react-native');
var {
  Component,
} = React;

class NetUitl extends Component {

  static BaseUrl = 'https://api.douban.com/v2/movie/top250?start=0&count=20';

  static postJson (url,parma,callback){
    var fetchOption = {
      method: 'POST',
      headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json',
      },
      body: JSON.stringify(parma)
    };

    fetch(url,fetchOption)
      .then((response) => response.json())
      .then((responseJson) => {
        alert('success '+JSON.stringify(responseJson));
        return responseJson;
      })
      .catch((error) => {
        alert('error '+error);
        console.error(error);
      });

  }


  static get (url,callback){

      var fetchOption = {
        method:'POST',
        headers:{
          'Accept':'application/json',
          'Content-Type':'application/json',
        },
        body:JSON.stringify(data)
      }

      fetch(url,fetchOption)
      .then((response)=>response.text())
      .then((responseText)=>{
        callback(JSON.parse(responseText));
      })
      .catch((error) => { // 错误处理
        alert.error(error);   
      })
      
      .done();
  }

}

module.exports = NetUitl;