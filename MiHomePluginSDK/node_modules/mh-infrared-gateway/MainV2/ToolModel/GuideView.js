var React = require('react-native');
var {
  Component,
  StyleSheet,
  Dimensions,
  TouchableHighlight,
  View,
  Image,
  Text,
  Modal,
} = React;

import { NativeModules } from 'react-native';
var MHPluginSDK = NativeModules.MHPluginSDK;
var TitleButton = require('../../CommonModules/TitleButton');
var screenWidth = Dimensions.get('window').width;
var screenHeight = Dimensions.get('window').height;

class GuideView extends React.Component{
  constructor(props) {
    super(props);
    this.state={
      modalVisible:this.props.defaultShow,
      contentText:undefined,
    };
  }
  
  /* DOM */
  render(){
    return(
      <Modal 
      animationType="slide"
      visible={this.state.modalVisible}
      transparent={true}
      onRequestClose={()=>this.setState({modalVisible:false})} >

          <TouchableHighlight onPress={()=> this.hidden()} activeOpacity={0.5} underlayColor='#e4e2e4'>
                    <View style={[{},styles.containerAll]} >
                        <View style={styles.contentBgView}>
                              <View style={styles.contentView}>
                                  <View style={styles.topImageView}>
                                      <Image style={styles.image} 
                                      source={{isStatic:!MHPluginSDK.devMode, uri:MHPluginSDK.basePath + 'ControllerImage/guide_alert_bg.png'}} />
                                  </View>       
                                  <View style={styles.middleView}>
                                      <View style={styles.contentTextView}>
                                          {/* <Text style={styles.contentText}>{this.state.contentTextOne}</Text>
                                          <Text style={styles.contentText}>{this.state.contentTextTwo}</Text> */}
                                          <Text style={styles.contentText}>
                                          1.使用时,请保证小米万能遥控器和设备之间没有遮挡
                                          </Text>
                                          <Text style={styles.contentText}>
                                          2.请点击遥控器按键测试设备是否有相应,找到你与设备匹配的遥控器
                                          </Text>

                                      </View> 
                                  </View>                                                 
                                  <View style={styles.bottomButtonView}>
                                      <TitleButton   
                                      textColor ="#70c7b9" 
                                      titleSize={17} 
                                      style={styles.button}  
                                      onPress ={()=>this.hidden()} 
                                      title="知道了">
                                      </TitleButton>
                                  </View> 
                              </View>         
                        </View>
                    </View>
          </TouchableHighlight>
      </Modal>
    );
  
  }
  
  /* event*/
  hidden(){
    this.setState({modalVisible:false});
  }

  /* 显示图层*/
  show(){
    this.setState({modalVisible:true});
  }

}

const topImageWidth = screenWidth-(10*2);
const topImageHeight = topImageWidth*0.55;

// const contentViewMarginTop = screenHeight*0.4;
const middleViewHeight = 120;
const bottomViewHeight = 60;

const contentViewHeight = bottomViewHeight + middleViewHeight +topImageHeight;
const contentViewMarginTop = screenHeight - contentViewHeight -20;
// const bottomViewHeight = 40;

var styles = StyleSheet.create({
  containerAll:{
    flex:1,
    backgroundColor:'rgba(10,10,10,0.5)',
    width:screenWidth,
    height:screenHeight,
  },
  contentBgView:{
    flexDirection:'column',
    position:'relative',
    marginTop:contentViewMarginTop,
    height:contentViewHeight,
    width:topImageWidth,
    marginLeft:10,
    marginRight:10,
    marginBottom:10,
  },
  contentView:{
    justifyContent:'center',
    alignItems:'center',
    alignSelf:'center',
  },
  topImageView:{
    justifyContent:'center',
    alignItems:'center',
    alignSelf:'center',
    width:topImageWidth,
    height:topImageHeight,
  },
  image:{
    width:topImageWidth,
    height:topImageHeight,
  },
  middleView:{
    width:topImageHeight,
    height:middleViewHeight,
    justifyContent:'center',
    alignItems:'center',
    alignSelf:'center',
    backgroundColor:'#00ffff',
  },
  contentText:{
      paddingLeft:10,
      paddingRight:10,
      paddingTop:5,
      fontSize:15,
      color:'rgb(20,20,20)',
  },
  contentTextView:{
    height:middleViewHeight,
    width:topImageWidth,
    backgroundColor:'#ffffff',
    justifyContent:'center',
    alignItems:'center',
    alignSelf:'center',
  },
  bottomButtonView:{
    marginTop:1,
    height:bottomViewHeight,
    width:topImageWidth,
    marginBottom:20,
    borderBottomLeftRadius:5,
    borderBottomRightRadius:5,
    justifyContent:'center',
    alignItems:'center',
    alignSelf:'center',
  },
  button:{
    width:topImageWidth,
    height:bottomViewHeight,
    backgroundColor:'#ffffff',
    borderBottomLeftRadius:15,
    borderBottomRightRadius:15,
  },
  MessageView:{
    position:'absolute',
    width:screenWidth,
    height:screenHeight/3,
    left:0,
    right:0,
    top:screenHeight*(2/3),
    marginBottom:0,
    justifyContent:'center',
  },
  MessageContentView:{
    justifyContent:'center',
    alignItems:'center',
    alignSelf:'center',
    padding:10,
    backgroundColor:'rgba(10,10,10,0.5)',
    borderRadius:3,    
  },
  MessageText:{
    color:'#ffffff',
    textAlign:'center',
    fontSize:14,
  },
});

module.exports = GuideView;